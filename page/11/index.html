<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 11 页 | coordinate</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
    <meta name="google-site-verification" content="true" />
  
  
    <meta name="baidu-site-verification" content="true" />
  
  
    <meta name="360-site-verification" content="true" />
  
  <meta property="og:type" content="website">
<meta property="og:title" content="coordinate">
<meta property="og:url" content="http://coordinate.wang/page/11/index.html">
<meta property="og:site_name" content="coordinate">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="coordinate">
  
    <link rel="alternate" href="/atom.xml" title="coordinate" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

</head>



  <body>


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" rel="home" >
                <img style="margin-bottom: 10px;"  width="124px" height="124px" alt="Hike News" src=" /css/images/pose.jpg">
              </a>
            
          </h1>
          
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">首页</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">归档</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/categories">分类</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/tags">标签</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about">关于</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-2018-05-24-Leetcode-15三数之和"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/24/2018-05-24-Leetcode-15三数之和/">Leetcode 15:三数之和</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/24/2018-05-24-Leetcode-15三数之和/" class="article-date">
	  <time datetime="2018-05-23T16:00:00.000Z" itemprop="datePublished">五月 24, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个包含 <em>n</em> 个整数的数组 <code>nums</code>，判断 <code>nums</code> 中是否存在三个元素 <em>a，b，c ，</em>使得 <em>a + b + c =</em> 0 ？找出所有满足条件且不重复的三元组。</p>
<p><strong>注意：</strong>答案中不可以包含重复的三元组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例如, 给定数组 nums = [-1, 0, 1, 2, -1, -4]，</span><br><span class="line"></span><br><span class="line">满足要求的三元组集合为：</span><br><span class="line">[</span><br><span class="line">  [-1, 0, 1],</span><br><span class="line">  [-1, -1, 2]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>解题思路</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-23-Leetcode-209长度最小的子数组（最详细解决方案！！！）"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/23/2018-05-23-Leetcode-209长度最小的子数组（最详细解决方案！！！）/">Leetcode 209:长度最小的子数组（最详细解决方案！！！）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/23/2018-05-23-Leetcode-209长度最小的子数组（最详细解决方案！！！）/" class="article-date">
	  <time datetime="2018-05-22T16:00:00.000Z" itemprop="datePublished">五月 23, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个含有 <strong>n</strong> 个正整数的数组和一个正整数 <strong>s ，</strong>找出该数组中满足其和 <strong>≥ s</strong> 的长度最小的子数组<strong>。</strong>如果不存在符合条件的子数组，返回 0。</p>
<p><strong>示例:</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: [2,3,1,2,4,3], s = 7</span><br><span class="line">输出: 2</span><br><span class="line">解释: 子数组 [4,3] 是该条件下的长度最小的子数组。</span><br></pre></td></tr></table></figure>
<p><strong>进阶:</strong></p>
<p>如果你已经完成了<em>O</em>(<em>n</em>) 时间复杂度的解法, 请尝试 <em>O</em>(<em>n</em> log <em>n</em>) 时间复杂度的解法。</p>
<p><strong>解题思路</strong></p>
<p>我们首先想到的方案是暴力破解，通过遍历所有的子数组找到满足条件的最小子数组。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type s: int</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        minLen = len(nums) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i, _ <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">            sum_all = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j, tmp <span class="keyword">in</span> enumerate(nums[i:]):</span><br><span class="line">                sum_all += tmp</span><br><span class="line">                <span class="keyword">if</span> sum_all &gt;= s:</span><br><span class="line">                    minLen = min(minLen, j + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> minLen == len(nums) + <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> minLen</span><br></pre></td></tr></table></figure>
<p>但是这种<code>O(n^2)</code>解法，我们通过分析发现我们上述算法中有大量重叠运算。我们有没有更快的做法？</p>
<p>我们这样看这个问题，问题要求我们找一个数，并且这个数是在一个有序的区间内。对了！！！可以使用<code>二分搜索法</code>，那么我们同时就要考虑判断条件（<code>二分搜索法</code>会判断中间元素），我们将<code>窗口的大小内元素值是否满足和&gt;=s</code>作为条件。</p>
<p>我们在算法的一开始应该考虑<code>数组长度的一半</code>，这里上取整或下取整不影响（但是要前后一致）结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">        p</span><br><span class="line">2   3   1   2   4   3</span><br><span class="line">|       |</span><br></pre></td></tr></table></figure>
<p>接着我们就要判断在这样一个窗口（左右都是闭区间）内是否满足上述条件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">        |       |</span><br><span class="line">2   3   1   2   4   3</span><br></pre></td></tr></table></figure>
<p>我们通过滑动窗口发现有满足条件（一旦出现，直接返回，不用继续寻找了）的情况。我们接着将长度对半</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">        p</span><br><span class="line">2   3   1   2   4   3</span><br><span class="line">|   |</span><br></pre></td></tr></table></figure>
<p>我们接着滑动窗口判断剩余空间中是否有满足条件的情况出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2   3   1   2   4   3</span><br><span class="line">                |   |</span><br></pre></td></tr></table></figure>
<p>以此类推下去。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_windowEx</span><span class="params">(self, nums, size, s)</span>:</span></span><br><span class="line">        sum = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, _ <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">            <span class="keyword">if</span> i &gt;= size:</span><br><span class="line">                sum -= nums[i - size]</span><br><span class="line"></span><br><span class="line">            sum += nums[i]</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">if</span> sum &gt;= s:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type s: int</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        l = <span class="number">1</span></span><br><span class="line">        r = len(nums)</span><br><span class="line">        result = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> l &lt;= r:</span><br><span class="line">            mid = l + (r - l)//<span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> self._windowEx(nums, mid, s):</span><br><span class="line">                r = mid - <span class="number">1</span></span><br><span class="line">                result = mid</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                l = mid + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<p>这个算法的时间复杂度就是<code>O(nlogn)</code>级别的。我们就会想有没有<code>O(n)</code>级别的算法呢？我们是否可以只遍历一遍就可以得到结果？</p>
<p>这个时候我们就会想到之前<a href="https://blog.csdn.net/qq_17550379/article/details/80512745" target="_blank" rel="noopener">Leetcode 167:两数之和 II - 输入有序数组</a>提到的<code>对撞指针</code>。我们可以建立两个指针，通过累加两个指针的区间内的值和<code>s</code>比较，就可以在<code>O(n)</code>级别的时间内得到结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2  3  1  2  4  3</span><br><span class="line">l &lt;- -&gt;  r</span><br></pre></td></tr></table></figure>
<p>由于两个指针移动的过程中，指针之间的距离就像一个窗口一样，我们通过控制窗口的大小，得到我们想要的结果。我们称这种问题是一个滑动窗口问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type s: int</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        l = <span class="number">0</span></span><br><span class="line">        r = <span class="number">0</span></span><br><span class="line">        sum_all = <span class="number">0</span></span><br><span class="line">        nums_len = len(nums)</span><br><span class="line">        minLength = nums_len + <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> l &lt; nums_len:</span><br><span class="line">            <span class="keyword">if</span> r &lt; nums_len <span class="keyword">and</span> sum_all &lt; s:</span><br><span class="line">                sum_all += nums[r]</span><br><span class="line">                r += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                sum_all -= nums[l]</span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> sum_all &gt;= s:</span><br><span class="line">                minLength = min(minLength, r - l)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> minLength == nums_len + <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> minLength</span><br></pre></td></tr></table></figure>
<p>该问题的其他语言版本添加到了我的<a href="https://github.com/luliyucoordinate/Leetcode" target="_blank" rel="noopener">GitHub Leetcode</a></p>
<p><strong>如有问题，希望大家指出！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-23-Leetcode-167两数之和-II---输入有序数组（最详细解决方案！！！）"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/23/2018-05-23-Leetcode-167两数之和-II---输入有序数组（最详细解决方案！！！）/">Leetcode 167:两数之和 II - 输入有序数组（最详细解决方案！！！）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/23/2018-05-23-Leetcode-167两数之和-II---输入有序数组（最详细解决方案！！！）/" class="article-date">
	  <time datetime="2018-05-22T16:00:00.000Z" itemprop="datePublished">五月 23, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个已按照<strong>升序排列</strong> 的有序数组，找到两个数使得它们相加之和等于目标数。</p>
<p>函数应该返回这两个下标值 index1 和 index2，其中 index1 必须小于 index2<em>。</em></p>
<p><strong>说明:</strong></p>
<ul>
<li>返回的下标值（index1 和 index2）不是从零开始的。</li>
<li>你可以假设每个输入只对应唯一的答案，而且你不可以重复使用相同的元素。</li>
</ul>
<p><strong>示例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: numbers = [2, 7, 11, 15], target = 9</span><br><span class="line">输出: [1,2]</span><br><span class="line">解释: 2 与 7 之和等于目标数 9 。因此 index1 = 1, index2 = 2 。</span><br></pre></td></tr></table></figure>
<p><strong>解题思路</strong></p>
<p>首先想到的解决思路是通过两次循环，每次循环遍历列表，这种算法的时间复杂度是<code>O(n^2)</code>。（这是我们在<a href="">Leetcode 1 两数之和</a>中提到的解决方案）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span><span class="params">(self, numbers, target)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type numbers: List[int]</span></span><br><span class="line"><span class="string">        :type target: int</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        nums_len = len(numbers)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(nums_len):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i + <span class="number">1</span>, nums_len):</span><br><span class="line">                <span class="keyword">if</span> numbers[i] + numbers[j] == target:</span><br><span class="line">                    <span class="keyword">return</span> [i + <span class="number">1</span>, j + <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>
<p>但是很明显，这种暴力解法在这问题中显得很蠢(⊙﹏⊙)</p>
<p>我们知道这个数据是有序的，那么我们很容易联想到使用二分搜索法是不是可以用于这个问题呢？我们可以每次判断<code>target-num[i]</code>对应的值是否在<code>num[i+1:]</code>中，这个时候算法的复杂度变成了<code>O(nlogn)</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_BinarySearch</span><span class="params">(self, numbers, target)</span>:</span></span><br><span class="line">        l = <span class="number">0</span></span><br><span class="line">        r = len(numbers) - <span class="number">1</span>       </span><br><span class="line">        <span class="keyword">while</span> l &lt;= r:</span><br><span class="line">            mid = (l + r) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> target == numbers[mid]:</span><br><span class="line">                <span class="keyword">return</span> mid</span><br><span class="line">            <span class="keyword">elif</span> target &lt; numbers[mid]:</span><br><span class="line">                r = mid - <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                l = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span><span class="params">(self, numbers, target)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type numbers: List[int]</span></span><br><span class="line"><span class="string">        :type target: int</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        nums_len = len(numbers)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(nums_len):</span><br><span class="line">            dif = target - numbers[i] </span><br><span class="line">            dif_index = self._BinarySearch(numbers[i + <span class="number">1</span>:], dif)</span><br><span class="line">            <span class="keyword">if</span> dif_index != <span class="number">-1</span>:</span><br><span class="line">                <span class="keyword">return</span> [i + <span class="number">1</span>, dif_index + i + <span class="number">2</span>]</span><br><span class="line">        <span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>
<p>那么我们就想有没有<code>O(n)</code>级别的做法呢？我们依然可以参考之前<a href="">Leetcode 1 两数之和</a>中使用<code>hash</code>表的方法，但是这种做法的空间复杂度就变成了<code>O(n)</code>。我们有没有空间复杂度<code>O(1)</code>，时间复杂度<code>O(n)</code>的做法呢？我们要充分利用题目给的条件：<strong>有序数组</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0  1  2  3  4  5  6  7</span><br><span class="line">l-&gt;                &lt;-r</span><br></pre></td></tr></table></figure>
<p>我们可以这样想，我们首先判断首尾两项的和是不是<code>target</code>，如果比<code>target</code>小，那么我们<code>左边+1</code>位置的数（比<code>左边</code>位置的数大）再和右相相加，继续判断。如果比<code>target</code>大，那么我们<code>右边-1</code>位置的数（比<code>右边位置的数小</code>）再和左相相加，继续判断。我们通过这样不断放缩的过程，就可以在<code>O(n)</code>的时间复杂度内找到对应的坐标位置。（这和快速排序的思路很相似）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span><span class="params">(self, numbers, target)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type numbers: List[int]</span></span><br><span class="line"><span class="string">        :type target: int</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        l = <span class="number">0</span></span><br><span class="line">        r = len(numbers) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> l &lt; r:</span><br><span class="line">            <span class="keyword">if</span> numbers[l] + numbers[r] == target:</span><br><span class="line">                <span class="keyword">return</span> [l + <span class="number">1</span>, r + <span class="number">1</span>]</span><br><span class="line">            <span class="keyword">elif</span> numbers[l] + numbers[r] &lt; target:</span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                r -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>
<p>这种解法叫做<code>对撞指针法</code>，又叫做<code>双索引法</code>。</p>
<p>该问题的其他语言版本添加到了我的<a href="https://github.com/luliyucoordinate/Leetcode" target="_blank" rel="noopener">GitHub Leetcode</a></p>
<p><strong>如有问题，希望大家指出！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-23-Leetcode-283移动零（最详细解决方案！！！）"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/23/2018-05-23-Leetcode-283移动零（最详细解决方案！！！）/">Leetcode 283:移动零（最详细解决方案！！！）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/23/2018-05-23-Leetcode-283移动零（最详细解决方案！！！）/" class="article-date">
	  <time datetime="2018-05-22T16:00:00.000Z" itemprop="datePublished">五月 23, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个数组 <code>nums</code>，编写一个函数将所有 <code>0</code> 移动到数组的末尾，同时保持非零元素的相对顺序。</p>
<p><strong>示例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: [0,1,0,3,12]</span><br><span class="line">输出: [1,3,12,0,0]</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong>:</p>
<ol>
<li>必须在原数组上操作，不能拷贝额外的数组。</li>
<li>尽量减少操作次数。</li>
</ol>
<p><strong>解题思路</strong></p>
<p>我们首先想到的做法是：遍历一遍数组<code>nums</code>，将非<code>0</code>元素添加到一个新建立的数组<code>nonZeroElements</code>中，然后将<code>nonZeroElements</code>中的元素<code>copy</code>到<code>nums</code>的最前面，对<code>nums</code>后面的元素赋值<code>0</code>即可。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">moveZeroes</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        nonZeroElements = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> i != <span class="number">0</span>:</span><br><span class="line">                nonZeroElements.append(i)</span><br><span class="line"></span><br><span class="line">        nonZeroElements_len = len(nonZeroElements)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(nonZeroElements_len):</span><br><span class="line">            nums[i] = nonZeroElements[i]</span><br><span class="line"></span><br><span class="line">        nums_len = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(nonZeroElements_len, nums_len):</span><br><span class="line">            nums[i] = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>那么我们稍微分析一下这个解法，我们发现这个解法中使用了一个额外的辅助空间，那么我们能不能不使用额外空间呢？Yes。</p>
<p>我们可以使用一个变量<code>k</code>记录位置，我们通过遍历<code>nums</code>数组，将不为<code>0</code>的元素依次复制到<code>nums</code>的前面，并且记录我们复制了多少个元素，对<code>len(nums)-k</code>的元素置<code>0</code>即可。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">moveZeroes</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> i != <span class="number">0</span>:</span><br><span class="line">                nums[k] = i</span><br><span class="line">                k += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        nums_len = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(k, nums_len):</span><br><span class="line">            nums[i] = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>通过上面的方法，我们将算法的空间复杂度降到了<code>O(1)</code>级别，而算法的时间复杂度依旧是<code>O(n)</code>级别。</p>
<p>当然我们这里有一个更<code>pythonic</code>的做法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">moveZeroes</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">            <span class="string">"""</span></span><br><span class="line"><span class="string">            :type nums: List[int]</span></span><br><span class="line"><span class="string">            :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">            """</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(nums.count(<span class="number">0</span>)):</span><br><span class="line">                nums.remove(<span class="number">0</span>)</span><br><span class="line">                nums.append(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>但是从效率上远不及前面的做法。</p>
<p>我们看到上面的做法都是对非<code>0</code>元素和<code>0</code>元素分开考虑，那们我们可不可以对这两种元素同时考虑呢？我们通过不断的交换非<code>0</code>元素和<code>0</code>元素之间的位置做到这一点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">moveZeroes</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, num <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">            <span class="keyword">if</span> num != <span class="number">0</span>:</span><br><span class="line">                nums[i], nums[k] = nums[k], nums[i]</span><br><span class="line">                k += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>上面的代码比之前的简洁了不少，但是依然还有可优化的空间。如果我们的数组全部是非<code>0</code>元素的话，上面代码就会对所有非<code>0</code>元素自己交换一次。所有可以有如下改进：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">moveZeroes</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, num <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">            <span class="keyword">if</span> num != <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">if</span> i != k:</span><br><span class="line">                    nums[i], nums[k] = nums[k], nums[i]</span><br><span class="line">                    k += <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>: <span class="comment">#i == k</span></span><br><span class="line">                    k += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>该问题的其他语言版本添加到了我的<a href="https://github.com/luliyucoordinate/Leetcode" target="_blank" rel="noopener">GitHub Leetcode</a></p>
<p><strong>如有问题，希望大家指出！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-23-Leetcode-75分类颜色"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/23/2018-05-23-Leetcode-75分类颜色/">Leetcode 75:分类颜色（最详细解决方案！！！）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/23/2018-05-23-Leetcode-75分类颜色/" class="article-date">
	  <time datetime="2018-05-22T16:00:00.000Z" itemprop="datePublished">五月 23, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个包含红色、白色和蓝色，一共 <em>n</em> 个元素的数组，<strong>原地</strong>对它们进行排序，使得相同颜色的元素相邻，并按照红色、白色、蓝色顺序排列。</p>
<p>此题中，我们使用整数 0、 1 和 2 分别表示红色、白色和蓝色。</p>
<p><strong>注意:</strong><br>不能使用代码库中的排序函数来解决这道题。</p>
<p><strong>示例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: [2,0,2,1,1,0]</span><br><span class="line">输出: [0,0,1,1,2,2]</span><br></pre></td></tr></table></figure>
<p><strong>进阶：</strong></p>
<ul>
<li>一个直观的解决方案是使用计数排序的两趟扫描算法。<br>首先，迭代计算出0、1 和 2 元素的个数，然后按照0、1、2的排序，重写当前数组。</li>
<li>你能想出一个仅使用常数空间的一趟扫描算法吗？</li>
</ul>
<p><strong>解题思路</strong></p>
<p>首先想到的思路就是写一个快速排序（因为不能使用系统自带的排序函数），所以我就写了一个三路快排（没有使用<code>random</code>）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_sortColors</span><span class="params">(self, nums, l, r)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> r &lt;= l: <span class="keyword">return</span></span><br><span class="line">        lt = l</span><br><span class="line">        gt = r + <span class="number">1</span></span><br><span class="line">        i = l + <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; gt:</span><br><span class="line">            <span class="keyword">if</span> nums[i] &lt; nums[l]:</span><br><span class="line">                lt += <span class="number">1</span></span><br><span class="line">                nums[i], nums[lt] = nums[lt], nums[i]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">elif</span> nums[i] &gt; nums[l]:</span><br><span class="line">                gt -= <span class="number">1</span></span><br><span class="line">                nums[i], nums[gt] = nums[gt], nums[i]</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">        nums[l], nums[lt] = nums[lt], nums[l]</span><br><span class="line">        self._sortColors(nums, l, lt - <span class="number">1</span>)</span><br><span class="line">        self._sortColors(nums, gt, r)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sortColors</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self._sortColors(nums, <span class="number">0</span>, len(nums) - <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>我们知道这个算法的时间复杂度是<code>O(nlogn)</code>，那么我们能不能使用<code>O(n)</code>就解决这个问题呢？我们一直都忽略了题目的条件，我们没有充分利用它（只有<code>0，1，2</code>三个元素）</p>
<p>我们可以这么想，我们先统计总共有多少个<code>0</code>、<code>1</code>和<code>2</code>，然后再将这些值放回就可以了，这实际上是计数排序的原理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sortColors</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        count = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">assert</span>(i &gt;= <span class="number">0</span> <span class="keyword">and</span> i &lt;= <span class="number">2</span>)</span><br><span class="line">            count[i] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        index = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, num <span class="keyword">in</span> enumerate(count):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(num):</span><br><span class="line">                nums[index] = i</span><br><span class="line">                index += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>我们通过分析发现这个算法的时间复杂度是<code>O(n)</code>级别的，而空间复杂度和我们统计的数的个数有关<code>O(3)</code>。并且我们这个解法中扫描了两遍数组，我们有没有只扫描一遍的做法呢？</p>
<p>我们是否可以使用三路快排的思路（保证遍历数组的过程中<code>0</code>位于数组的开头，<code>1</code>位于数组的中间，<code>2</code>位于数组的末尾）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sortColors</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        zero = <span class="number">-1</span> <span class="comment"># [0, zero] 0</span></span><br><span class="line">        i = <span class="number">0</span> <span class="comment"># [zero + 1, i) 1</span></span><br><span class="line">        two = len(nums) <span class="comment"># [two, len(nums) - 1] 2</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> i &lt; two:</span><br><span class="line">            <span class="keyword">if</span> nums[i] == <span class="number">1</span>:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> nums[i] == <span class="number">2</span>:</span><br><span class="line">                two -= <span class="number">1</span></span><br><span class="line">                nums[two], nums[i] = nums[i], nums[two]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># assert(nums[i] == 0)</span></span><br><span class="line">                zero += <span class="number">1</span></span><br><span class="line">                nums[zero], nums[i] = nums[i], nums[zero]</span><br><span class="line">                i += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>该问题的其他语言版本添加到了我的<a href="https://github.com/luliyucoordinate/Leetcode" target="_blank" rel="noopener">GitHub Leetcode</a></p>
<p><strong>如有问题，希望大家指出！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-17-ResNet理论基础与具体实现"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/17/2018-05-17-ResNet理论基础与具体实现/">ResNet理论基础与具体实现（详细教程）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/17/2018-05-17-ResNet理论基础与具体实现/" class="article-date">
	  <time datetime="2018-05-16T16:00:00.000Z" itemprop="datePublished">五月 17, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>论文地址：<a href="https://arxiv.org/abs/1512.03385" target="_blank" rel="noopener">Deep Residual Learning for Image Recognition</a></p>
<p>​           <a href="https://arxiv.org/abs/1603.05027" target="_blank" rel="noopener">Identity Mappings in Deep Residual Networks</a></p>
<p>pytroch源码地址：<a href="https://pytorch.org/docs/stable/_modules/torchvision/models/resnet.html" target="_blank" rel="noopener">resnet</a></p>
<h1 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h1><p><code>ResNet</code>是2015年就提出的网络结构，中文名字叫作<strong>深度残差网络</strong>，主要作用是图像分类。现在在图像分割、目标检测等领域都有很广泛的运用，另外值得一提的是<code>Alpha Zero</code>中也使用了这种网络。</p>
<p>我第一次看到这个网络时的第一映像就是 <strong>这不就是一个差分放大电路吗？</strong>（由于本人是学电路出生）后来我得知<code>Kaiming He</code>原先是学数学的，这就让我感觉很困惑了。可能这种种的问题，最后都是殊途同归吧！！！</p>
<center class="half"><br><img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1frefsjwa7zj207e04bt9e.jpg"><br></center>

<p>我想如果各位读完全文的话，也会和我有一样的看法吧？</p>
<h1 id="0x01-问题的引出"><a href="#0x01-问题的引出" class="headerlink" title="0x01 问题的引出"></a>0x01 问题的引出</h1><p>随着硬件的不断升级，我们可以使得原来很浅的网络不断的加深，但是这种做法随之而来就出现了这样的一个问题<strong>深层训练的效果反而不如浅层网络</strong>，也就是网络出现了<strong>退化</strong>。这个问题很大程度上归结为<strong>网络层数过深，梯度下降优化loss变得困难</strong>。</p>
<p>作者为了解决上述问题，提出了这样一个结构：</p>
<center class="half"><br><img src="http://wx3.sinaimg.cn/mw690/af2d2659ly1fregos6txxj20ak060wfh.jpg"><br></center>

<p>是不是和我前面提到的<strong>差分放大电路</strong>很像？</p>
<h1 id="0x02-解决退化问题"><a href="#0x02-解决退化问题" class="headerlink" title="0x02 解决退化问题"></a>0x02 解决退化问题</h1><p>如上图所示，作者添加了一个<code>identity</code>结构，也就是将输入<code>x</code>和卷积后的输出<code>F(x)</code>相加。如果我们要学习的目标函数是<code>H(x)</code>的话。</p>
<center class="half"><br><img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1fregouaj97j207w05emxr.jpg"><br></center>

<p>当需要拟合的函数<code>H(x)</code>很复杂的时候，<code>H(x)</code>和<code>F(x)=H(x)-x</code>近似等价，那么我们之前的学习目标<code>H(x)</code>就可以变成<code>F(x)+x</code>。为什么要这样的的做替换？因为<code>F(x)</code>的优化会比<code>H(x)</code>简单。为什么呢？这实际上是源自<strong>残差表示法（Residual Representations）</strong>的思想。</p>
<ul>
<li>在图像识别中，<strong>VLAD</strong>是一种由残差向量关于字典的编码表示，而<strong>Fisher Vector</strong>可以被定义为<strong>VLAD</strong>的概率版本，它们都是图像检索和分类的强大的浅层表示。对于向量化，<strong>编码残差向量比编码原始向量更有效。</strong></li>
<li>在低层次的视觉和计算机图形学中，为了解偏微分方程，一般使用的多网格法。就是将系统重新设计成多个尺度下的子问题，每个子问题负责一个较粗的和更细的尺度之间的残差解。多网格的另一种选择是分层基础的预处理，它依赖于在两个尺度之间表示残差向量的变量。研究表明，<strong>这些（转化成多个不同尺度的子问题，求残差解的）解决方案的收敛速度远远快于那些不知道残差的标准解决方案</strong>。</li>
</ul>
<p>我们把$H(x)=F(x)+x$写成$y_l=h(x_l)+F(x_l,W_l)$，$x_{l+1}=f(y_l)$（$f$是激活函数）</p>
<p>那么如果$h(x_l)=x_l$和$f(y_l)=y_l$是恒等映射，那么上述公式表达为</p>
<ul>
<li>$x_{l+1}=x_l+F(x_l,W_l)$</li>
</ul>
<p>通过网络的层数增加，我们不断增加<code>residual block</code>，最后得到的递归公式就是：</p>
<ul>
<li>$x_L=x_l+\sum_{i=l}^{L-1}F(x_i,W_i)$（L表示任意深的<code>residual block</code>）</li>
</ul>
<p>而对于反向传播，假设损失函数是$\theta$，那么可以得到</p>
<ul>
<li>$\frac{\partial\theta}{\partial x_l}=\frac{\partial\theta}{\partial x_L}\frac{\partial\theta}{\partial x_l}=\frac{\partial\theta}{\partial x_L}(1+\frac{\partial}{\partial x_L}\sum_{i=l}^{L-1}F(x_i,W_i))$</li>
</ul>
<p>我们可以看到整个式子分成了$\frac{\partial\theta}{\partial x_L}$和$\frac{\partial}{\partial x_L}\sum_{i=l}^{L-1}F(x_i,W_i)$两个部分。第一部分直接把深层的梯度传递到任意浅层，而第二项不可能为<code>-1</code>，所以这样的话浅层的梯度就不会消失。</p>
<h1 id="0x03-residual-block"><a href="#0x03-residual-block" class="headerlink" title="0x03 residual block"></a>0x03 residual block</h1><p>整个网络最重要的部分就是上面的<code>identity</code>，我们称这个结构整体是<code>residual block</code>。现在我们要考虑的问题就是上述结构中，卷积层如何存放？激活函数如何存放？。。。这些问题。为此，作者对于不同方式做了比较</p>
<center class="half"><br><img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1frejzk1xusj20p80am75y.jpg"><br></center>

<p>实验结果发现，最后一种方式的<code>residual block</code>效果最好。</p>
<p>这应该是早期<code>residual block</code>的模样，而由于技术的不断发展，后来出现了<code>batch normalization</code>这样的技术，<code>residual block</code>也做了相对应的调整，变成了现在的模样。</p>
<p>对于<code>resnet18</code>和<code>resnet34</code></p>
<center class="half"><br><img src="http://wx1.sinaimg.cn/mw690/af2d2659ly1frf7jzwt8qj20870a4glk.jpg"><br></center>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conv3x3</span><span class="params">(in_planes, out_planes, stride=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="string">"""3x3 convolution with padding"""</span></span><br><span class="line">    <span class="keyword">return</span> nn.Conv2d(in_planes, out_planes, kernel_size=<span class="number">3</span>, stride=stride,</span><br><span class="line">                     padding=<span class="number">1</span>, bias=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicBlock</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    expansion = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, inplanes, planes, stride=<span class="number">1</span>, downsample=None)</span>:</span></span><br><span class="line">        super(BasicBlock, self).__init__()</span><br><span class="line">        self.conv1 = conv3x3(inplanes, planes, stride)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(planes)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="keyword">True</span>)</span><br><span class="line">        self.conv2 = conv3x3(planes, planes)</span><br><span class="line">        self.bn2 = nn.BatchNorm2d(planes)</span><br><span class="line">        self.downsample = downsample</span><br><span class="line">        self.stride = stride</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        residual = x</span><br><span class="line"></span><br><span class="line">        out = self.conv1(x)</span><br><span class="line">        out = self.bn1(out)</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        out = self.conv2(out)</span><br><span class="line">        out = self.bn2(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            residual = self.downsample(x)</span><br><span class="line"></span><br><span class="line">        out += residual</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>
<p>对于<code>resnet50</code>、<code>resnet101</code>和<code>resnet152</code></p>
<center class="half"><br><img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1frf7jy5mroj209e0dc0sq.jpg"><br></center>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bottleneck</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    expansion = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, inplanes, planes, stride=<span class="number">1</span>, downsample=None)</span>:</span></span><br><span class="line">        super(Bottleneck, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(inplanes, planes, kernel_size=<span class="number">1</span>, bias=<span class="keyword">False</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(planes)</span><br><span class="line">        self.conv2 = nn.Conv2d(planes, planes, kernel_size=<span class="number">3</span>, stride=stride,</span><br><span class="line">                               padding=<span class="number">1</span>, bias=<span class="keyword">False</span>)</span><br><span class="line">        self.bn2 = nn.BatchNorm2d(planes)</span><br><span class="line">        self.conv3 = nn.Conv2d(planes, planes * <span class="number">4</span>, kernel_size=<span class="number">1</span>, bias=<span class="keyword">False</span>)</span><br><span class="line">        self.bn3 = nn.BatchNorm2d(planes * <span class="number">4</span>)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="keyword">True</span>)</span><br><span class="line">        self.downsample = downsample</span><br><span class="line">        self.stride = stride</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        residual = x</span><br><span class="line"></span><br><span class="line">        out = self.conv1(x)</span><br><span class="line">        out = self.bn1(out)</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        out = self.conv2(out)</span><br><span class="line">        out = self.bn2(out)</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        out = self.conv3(out)</span><br><span class="line">        out = self.bn3(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            residual = self.downsample(x)</span><br><span class="line"></span><br><span class="line">        out += residual</span><br><span class="line">        out = self.relu(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>
<h1 id="0x04-网络结构"><a href="#0x04-网络结构" class="headerlink" title="0x04 网络结构"></a>0x04 网络结构</h1><p>整体的<code>resnet</code>系列网络如下：</p>
<center class="half"><br><img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1frf67uujljj20u00cyad7.jpg"><br></center>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ResNet</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, block, layers, num_classes=<span class="number">1000</span>)</span>:</span></span><br><span class="line">        self.inplanes = <span class="number">64</span></span><br><span class="line">        super(ResNet, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, <span class="number">64</span>, kernel_size=<span class="number">7</span>, stride=<span class="number">2</span>, padding=<span class="number">3</span>,</span><br><span class="line">                               bias=<span class="keyword">False</span>)<span class="comment">#7x7,64</span></span><br><span class="line">        self.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="keyword">True</span>)</span><br><span class="line">        self.maxpool = nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)<span class="comment">#maxpool</span></span><br><span class="line">        self.layer1 = self._make_layer(block, <span class="number">64</span>, layers[<span class="number">0</span>])</span><br><span class="line">        self.layer2 = self._make_layer(block, <span class="number">128</span>, layers[<span class="number">1</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer3 = self._make_layer(block, <span class="number">256</span>, layers[<span class="number">2</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer4 = self._make_layer(block, <span class="number">512</span>, layers[<span class="number">3</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.avgpool = nn.AvgPool2d(<span class="number">7</span>, stride=<span class="number">1</span>)<span class="comment">#average pool</span></span><br><span class="line">        self.fc = nn.Linear(<span class="number">512</span> * block.expansion, num_classes)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line">            <span class="keyword">if</span> isinstance(m, nn.Conv2d):</span><br><span class="line">                n = m.kernel_size[<span class="number">0</span>] * m.kernel_size[<span class="number">1</span>] * m.out_channels</span><br><span class="line">                m.weight.data.normal_(<span class="number">0</span>, math.sqrt(<span class="number">2.</span> / n))</span><br><span class="line">            <span class="keyword">elif</span> isinstance(m, nn.BatchNorm2d):</span><br><span class="line">                m.weight.data.fill_(<span class="number">1</span>)</span><br><span class="line">                m.bias.data.zero_()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_make_layer</span><span class="params">(self, block, planes, blocks, stride=<span class="number">1</span>)</span>:</span></span><br><span class="line">        downsample = <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">if</span> stride != <span class="number">1</span> <span class="keyword">or</span> self.inplanes != planes * block.expansion:</span><br><span class="line">            downsample = nn.Sequential(</span><br><span class="line">                nn.Conv2d(self.inplanes, planes * block.expansion,</span><br><span class="line">                          kernel_size=<span class="number">1</span>, stride=stride, bias=<span class="keyword">False</span>),</span><br><span class="line">                nn.BatchNorm2d(planes * block.expansion),</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">        layers = []</span><br><span class="line">        layers.append(block(self.inplanes, planes, stride, downsample))</span><br><span class="line">        self.inplanes = planes * block.expansion</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, blocks):</span><br><span class="line">            layers.append(block(self.inplanes, planes))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> nn.Sequential(*layers)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = self.bn1(x)</span><br><span class="line">        x = self.relu(x)</span><br><span class="line">        x = self.maxpool(x)</span><br><span class="line"></span><br><span class="line">        x = self.layer1(x)</span><br><span class="line">        x = self.layer2(x)</span><br><span class="line">        x = self.layer3(x)</span><br><span class="line">        x = self.layer4(x)</span><br><span class="line"></span><br><span class="line">        x = self.avgpool(x)</span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), <span class="number">-1</span>)</span><br><span class="line">        x = self.fc(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<p>代码和网络结构都是对应的，很容易理解。</p>
<p>关于网络结构我这里只举两个例子<code>resnet18</code>以及<code>resnet50</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resnet18</span><span class="params">(pretrained=False, **kwargs)</span>:</span></span><br><span class="line">    <span class="string">"""Constructs a ResNet-18 model.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        pretrained (bool): If True, returns a model pre-trained on ImageNet</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    model = ResNet(BasicBlock, [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>], **kwargs)<span class="comment">#对应图中的2x2x2x2</span></span><br><span class="line">    <span class="keyword">if</span> pretrained:</span><br><span class="line">        model.load_state_dict(model_zoo.load_url(model_urls[<span class="string">'resnet18'</span>]))</span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resnet50</span><span class="params">(pretrained=False, **kwargs)</span>:</span></span><br><span class="line">    <span class="string">"""Constructs a ResNet-50 model.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        pretrained (bool): If True, returns a model pre-trained on ImageNet</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    model = ResNet(Bottleneck, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">3</span>], **kwargs)<span class="comment">#对应图中的3x4x6x3</span></span><br><span class="line">    <span class="keyword">if</span> pretrained:</span><br><span class="line">        model.load_state_dict(model_zoo.load_url(model_urls[<span class="string">'resnet50'</span>]))</span><br><span class="line">    <span class="keyword">return</span> model</span><br></pre></td></tr></table></figure>
<p>这个代码的逻辑非常清晰，非常值得学习！！！</p>
<p><strong>如有任何问题，希望大家指出！！！</strong></p>
<p>reference:</p>
<p><a href="https://blog.csdn.net/xxy0118/article/details/78324256" target="_blank" rel="noopener">https://blog.csdn.net/xxy0118/article/details/78324256</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pytorch/">pytorch</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-17-FPN理论基础与具体实现"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/17/2018-05-17-FPN理论基础与具体实现/">FPN理论基础与具体实现（详细教程）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/17/2018-05-17-FPN理论基础与具体实现/" class="article-date">
	  <time datetime="2018-05-16T16:00:00.000Z" itemprop="datePublished">五月 17, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>论文地址：<a href="https://arxiv.org/abs/1612.03144" target="_blank" rel="noopener">Feature Pyramid Networks for Object Detection</a></p>
<p>项目地址：<a href="">FPN_pytorch</a></p>
<h1 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h1><p>我们在做目标检测和超分辨率重建等问题的时候，我们一般是对同一个尺寸的图片进行网络训练。我们希望我们的网络能够适应更多尺寸的图片，我们传统的做法使用图像金字塔，但是这种做法从侧面提升了计算的复杂度，我们希望可以改善这个问题，所以本文就提出了一种在特征图金字塔的方法，我们称这种网络结构叫做<code>FPN</code>。</p>
<h1 id="0x01-论文分析"><a href="#0x01-论文分析" class="headerlink" title="0x01 论文分析"></a>0x01 论文分析</h1><center class="half"><br><img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1frgdo2lobdj20dp08g40b.jpg"><br></center>

<p>传统的图像金字塔任务是将不同尺度的图片进行特征提取（图a），主要使用人工提取特征，在人工提取特征的时代，大量使用特征化图像金字塔。它们非常重要，以至于像DPM这样的物体检测器需要密集的比例采样才能获得好的结果。但是这种做法变相的增加了训练数据，提高了运算耗时，所以这种做法已经很少被使用。</p>
<p>对于识别任务，工程特征已经被深度卷积网络（<code>ConvNets</code>）计算的特征大部分所取代。除了能够表示更高级别的语义，<code>ConvNets</code>不同层的特征图尺度也不同，从而有助于从单一输入尺度上计算的特征识别（图b）。但是这种做法的缺陷在于只使用了高分辨率特征，因为不同层之间的语义差别很大，最后一层主要都是高分辨率的特征，所以对于低分辨率的特征表现力不足。</p>
<p>接着为了改善上面的做法，一个很简洁的改进就是对不同尺度的特征图都进行利用，这也是<code>SSD</code>算法中使用的方法（图c）。理想情况下，<code>SSD</code>风格的金字塔将重复使用正向传递中计算的不同层次的多尺度特征图。但为了避免使用低层次特征，<code>SSD</code>会从偏后的<code>conv4_3</code>开始构建特征金字塔，这种做法没有对<code>conv4_3</code>之前的层进行利用，而这些层对于检测小目标很重要。</p>
<center class="half"><br><img src="http://wx3.sinaimg.cn/mw690/af2d2659ly1frgf2ss1l0j20va09b429.jpg"><br></center>

<p>本文提出一种新的做法（图d），通过高层特征进行上采样和低层特征进行自顶向下的连接，而且每一层都会进行预测。</p>
<h1 id="0x02-网络结构"><a href="#0x02-网络结构" class="headerlink" title="0x02 网络结构"></a>0x02 网络结构</h1><p>作者这里做了一个有意思的比较。如果我们不是对不同尺寸的特征图进行预测，而是将不同尺寸的特征图融合后进行预测，会怎么样呢？</p>
<center class="half"><br><img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1frgff4tsikj20bv08ojse.jpg"><br></center>

<p>作者通过实验发现后者做法（也就是本文的做法）结果上会好很多。</p>
<center class="half"><br><img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1frgr1ow3lxj20ni050wfn.jpg"><br></center>

<p>上图中的（f only finest level）就上通过不同尺度特征图融合后，只采用最后一层预测的结果。（d bottom-up pyramid）表示没有采用自顶向下的过程得到的结果。</p>
<p>作者的主网络是使用的<code>ResNet</code>，而特征图金字塔分成三个部分，一个<strong>自底向上的路径</strong>（左边），一个<strong>自顶向下的路径</strong>（右边）和<strong>中间的连接</strong>部分。</p>
<center class="half"><br><img src="http://wx4.sinaimg.cn/mw690/af2d2659ly1frgqozcvz2j20lj07y3yl.jpg"><br></center>

<p><strong>自底向上的路径</strong>：自下而上的路径是卷积网络的前馈计算，该算法计算由不同比例的特征映射组成的特征层级，其缩放步长为2。通常有许多层产生相同大小的输出映射，并且我们说这些层 处于相同的网络阶段。 对于我们的特征图金字塔，为每个阶段定义一个金字塔等级， 然后选择每个阶段的最后一层的输出作为我们特征图的参考集。 这种选择是自然的，因为每个阶段的最深层应具有最强的特征。<br>具体而言，对于<code>ResNets</code>，我们使用每个阶段的最后一个<code>residual block</code>输出的特征激活输出。 对于<code>conv2</code>，<code>conv3</code>，<code>conv4</code>和<code>conv5</code>输出，我们将这些最后<code>residual block</code>的输出表示为<code>{C2，C3，C4，C5}</code>，并且它们相对于输入图像具有<code>{4, 8, 16, 32}</code> 的步长。 由于其庞大的内存占用，我们不会将<code>conv1</code>纳入金字塔中。</p>
<p><strong>自顶向下的路径</strong>：自顶向下的路径通过对在空间上更抽象但语义更强高层特征图进行上采样来幻化高分辨率的特征。随后通过侧向连接从底向上的路径，使得高层特征得到增强。每个横向连接自底向上路径和自顶向下路径的特征图具有相同的尺寸。将低分辨率的特征图做2倍上采样（为了简单起见，使用最近邻上采样）。然后通过按元素相加，将上采样映射与相应的自底而上映射合并。这个过程是迭代的，直到生成最终的分辨率图。<br>为了开始迭代，我们只需在<code>C5</code>上附加一个<code>1×1</code>卷积层来生成低分辨率图<code>P5</code>。最后，我们在每个合并的图上附加一个<code>3×3</code>卷积来生成最终的特征映射，这是为了减少上采样的混叠效应。这个最终的特征映射集称为<code>{P2，P3，P4，P5}</code>，分别对应于<code>{C2，C3，C4，C5}</code>，它们具有相同的尺寸。<br>由于金字塔的所有层次都像传统的特征化图像金字塔一样使用共享分类器/回归器，因此我们在所有特征图中固定特征维度（通道数，记为d）。我们在本文中设置<code>d = 256</code>，因此所有额外的卷积层都有<code>256</code>个通道的输出。</p>
<center class="half"><br><img src="http://wx2.sinaimg.cn/mw690/af2d2659ly1frgff6s2i7j20a107mt97.jpg"><br></center>

<p><strong>中间连接</strong>：采用<code>1×1</code>的卷积核进行连接（减少特征图数量）。</p>
<h1 id="0x03-网络的具体实现"><a href="#0x03-网络的具体实现" class="headerlink" title="0x03 网络的具体实现"></a>0x03 网络的具体实现</h1><p>我们这里参考了<code>pytorch</code>的<code>resnet</code>的设计，关于<code>resent</code>的设计可以参看这篇<a href="https://blog.csdn.net/qq_17550379/article/details/80359471" target="_blank" rel="noopener">ResNet理论基础与具体实现（详细教程）</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FPN</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, block, layers)</span>:</span></span><br><span class="line">        super(FPN, self).__init__()</span><br><span class="line">        self.inplanes = <span class="number">64</span></span><br><span class="line"></span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, <span class="number">64</span>, kernel_size=<span class="number">7</span>, stride=<span class="number">2</span>, padding=<span class="number">3</span>, bias=<span class="keyword">False</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="keyword">True</span>)</span><br><span class="line">        self.maxpool = nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># Bottom-up layers</span></span><br><span class="line">        self.layer1 = self._make_layer(block,  <span class="number">64</span>, layers[<span class="number">0</span>])</span><br><span class="line">        self.layer2 = self._make_layer(block, <span class="number">128</span>, layers[<span class="number">1</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer3 = self._make_layer(block, <span class="number">256</span>, layers[<span class="number">2</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer4 = self._make_layer(block, <span class="number">512</span>, layers[<span class="number">3</span>], stride=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Top layer</span></span><br><span class="line">        self.toplayer = nn.Conv2d(<span class="number">2048</span>, <span class="number">256</span>, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, padding=<span class="number">0</span>)  <span class="comment"># Reduce channels</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Smooth layers</span></span><br><span class="line">        self.smooth1 = nn.Conv2d(<span class="number">256</span>, <span class="number">256</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.smooth2 = nn.Conv2d(<span class="number">256</span>, <span class="number">256</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.smooth3 = nn.Conv2d(<span class="number">256</span>, <span class="number">256</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Lateral layers</span></span><br><span class="line">        self.latlayer1 = nn.Conv2d(<span class="number">1024</span>, <span class="number">256</span>, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, padding=<span class="number">0</span>)</span><br><span class="line">        self.latlayer2 = nn.Conv2d( <span class="number">512</span>, <span class="number">256</span>, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, padding=<span class="number">0</span>)</span><br><span class="line">        self.latlayer3 = nn.Conv2d( <span class="number">256</span>, <span class="number">256</span>, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, padding=<span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line">            <span class="keyword">if</span> isinstance(m, nn.Conv2d):</span><br><span class="line">                n = m.kernel_size[<span class="number">0</span>] * m.kernel_size[<span class="number">1</span>] * m.out_channels</span><br><span class="line">                m.weight.data.normal_(<span class="number">0</span>, math.sqrt(<span class="number">2.</span> / n))</span><br><span class="line">            <span class="keyword">elif</span> isinstance(m, nn.BatchNorm2d):</span><br><span class="line">                m.weight.data.fill_(<span class="number">1</span>)</span><br><span class="line">                m.bias.data.zero_()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_make_layer</span><span class="params">(self, block, planes, blocks, stride=<span class="number">1</span>)</span>:</span></span><br><span class="line">        downsample  = <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">if</span> stride != <span class="number">1</span> <span class="keyword">or</span> self.inplanes != block.expansion * planes:</span><br><span class="line">            downsample  = nn.Sequential(</span><br><span class="line">                nn.Conv2d(self.inplanes, block.expansion * planes, kernel_size=<span class="number">1</span>, stride=stride, bias=<span class="keyword">False</span>),</span><br><span class="line">                nn.BatchNorm2d(block.expansion * planes)</span><br><span class="line">            )</span><br><span class="line">        layers = []</span><br><span class="line">        layers.append(block(self.inplanes, planes, stride, downsample))</span><br><span class="line">        self.inplanes = planes * block.expansion</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, blocks):</span><br><span class="line">            layers.append(block(self.inplanes, planes))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> nn.Sequential(*layers)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_upsample_add</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        _,_,H,W = y.size()</span><br><span class="line">        <span class="keyword">return</span> F.upsample(x, size=(H,W), mode=<span class="string">'bilinear'</span>) + y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="comment"># Bottom-up</span></span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = self.bn1(x)</span><br><span class="line">        x = self.relu(x)</span><br><span class="line">        c1 = self.maxpool(x)</span><br><span class="line">        </span><br><span class="line">        c2 = self.layer1(c1)</span><br><span class="line">        c3 = self.layer2(c2)</span><br><span class="line">        c4 = self.layer3(c3)</span><br><span class="line">        c5 = self.layer4(c4)</span><br><span class="line">        <span class="comment"># Top-down</span></span><br><span class="line">        p5 = self.toplayer(c5)</span><br><span class="line">        p4 = self._upsample_add(p5, self.latlayer1(c4))</span><br><span class="line">        p3 = self._upsample_add(p4, self.latlayer2(c3))</span><br><span class="line">        p2 = self._upsample_add(p3, self.latlayer3(c2))</span><br><span class="line">        <span class="comment"># Smooth</span></span><br><span class="line">        p4 = self.smooth1(p4)</span><br><span class="line">        p3 = self.smooth2(p3)</span><br><span class="line">        p2 = self.smooth3(p2)</span><br><span class="line">        <span class="keyword">return</span> p2, p3, p4, p5</span><br></pre></td></tr></table></figure>
<p>关于<code>FPN</code>的全部代码在这里：<a href="https://github.com/luliyucoordinate/FPN_pytorch" target="_blank" rel="noopener">FPN_pytorch</a></p>
<p><strong>如有任何问题，希望大家指出！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pytorch/">pytorch</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-12-Leetcode-3--无重复字符的最长子串"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/12/2018-05-12-Leetcode-3--无重复字符的最长子串/">Leetcode 3:无重复字符的最长子串（最详细解决方案！！！）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/12/2018-05-12-Leetcode-3--无重复字符的最长子串/" class="article-date">
	  <time datetime="2018-05-11T16:00:00.000Z" itemprop="datePublished">五月 12, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个字符串，找出不含有重复字符的<strong>最长子串</strong>的长度。</p>
<p><strong>示例：</strong></p>
<p>给定 <code>&quot;abcabcbb&quot;</code> ，没有重复字符的最长子串是 <code>&quot;abc&quot;</code> ，那么长度就是3。</p>
<p>给定 <code>&quot;bbbbb&quot;</code> ，最长的子串就是 <code>&quot;b&quot;</code> ，长度是1。</p>
<p>给定 <code>&quot;pwwkew&quot;</code> ，最长子串是 <code>&quot;wke&quot;</code> ，长度是3。请注意答案必须是一个<strong>子串</strong>，<code>&quot;pwke&quot;</code> 是 <em>子序列</em>  而不是子串。</p>
<p><strong>解题思路</strong></p>
<p>首先想到的解决思路是先遍历整个字符串，然后对遍历到的每个字符后的字符做处理（检查是否有重复元素），我们通过建立一个空的字符串，如果检查的字符在这个空的字符串中没有的话，我们将他加入这个空字符串中，并且记录这个空字符串的长度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type s: str</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        maxLength = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i,_ <span class="keyword">in</span> enumerate(s):  <span class="comment">#这里没有使用range函数      </span></span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">            usedChar = str()</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> s[i:]: </span><br><span class="line">                <span class="keyword">if</span> j <span class="keyword">not</span> <span class="keyword">in</span> usedChar:</span><br><span class="line">                    usedChar += j</span><br><span class="line">                    count += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> maxLength &lt; count:<span class="comment">#这里没有使用max函数</span></span><br><span class="line">                        maxLength = count</span><br><span class="line">                <span class="keyword">else</span>:                   </span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">return</span> maxLength</span><br></pre></td></tr></table></figure>
<p>上述代码中我没有使用注释中的做法，是因为那样做消耗的时间会增加很多（尤其这里如果使用<code>max</code>函数操作会极大地增加时间消耗，但是有的时候使用<code>max</code>函数速度会更快，暂时不清楚原因），大家可以自己测试一下。</p>
<p>另外，我们通过分析可以知道这个算法最差情况的时间复杂度是<code>O(n^2)</code>级别的，这显然不是我们想看到的。我们分析一下这个算法的缺陷在哪？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p w w k e w</span><br><span class="line">i</span><br><span class="line">    j</span><br><span class="line">usedChar = pw</span><br></pre></td></tr></table></figure>
<p>当<code>j</code>移动到第二个<code>w</code>时，这个时候<code>j in usedChar</code>，那么我们跳出循环。接着</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p w w k e w</span><br><span class="line">  i</span><br><span class="line">    j</span><br><span class="line">usedChar = w</span><br></pre></td></tr></table></figure>
<p>这个步骤其实是没有用的，因为去掉一个元素后，不可能比之前的元素更长了。我们可以直接跳到重复元素之后开始新的循环。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p w w k e w</span><br><span class="line">    i</span><br><span class="line">    j</span><br><span class="line">usedChar = w</span><br></pre></td></tr></table></figure>
<p>我们这里借用之前<a href="https://blog.csdn.net/qq_17550379/article/details/80435039" target="_blank" rel="noopener">Leetcode 1:两数之和</a>中使用<code>hash</code>表的思想</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :type s: str</span></span><br><span class="line"><span class="string">    :rtype: int</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        start = maxLength = <span class="number">0</span></span><br><span class="line">        usedChar = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> index, char <span class="keyword">in</span> enumerate(s):</span><br><span class="line">            <span class="keyword">if</span> char <span class="keyword">in</span> usedChar <span class="keyword">and</span> start &lt;= usedChar[char]:</span><br><span class="line">                start = usedChar[char] + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                maxLength = max(maxLength, index - start + <span class="number">1</span>)</span><br><span class="line">            usedChar[char] = index</span><br><span class="line">        <span class="keyword">return</span> maxLength</span><br></pre></td></tr></table></figure>
<p>这种解法速度很快，时间复杂度是<code>O(n)</code>级别，但是空间复杂度也是<code>O(n)</code>级别。这也是我认为这个题目目前为止最精彩的回答！！！</p>
<p>当然这个问题，我们也可以使用<a href="https://blog.csdn.net/qq_17550379/article/details/80540430" target="_blank" rel="noopener">Leetcode 209:长度最小的子数组</a>中提到的滑动窗口思想。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :type s: str</span></span><br><span class="line"><span class="string">    :rtype: int</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        l = <span class="number">0</span></span><br><span class="line">        r = <span class="number">0</span></span><br><span class="line">        maxLength = <span class="number">0</span></span><br><span class="line">        s_len = len(s)</span><br><span class="line">        usedChar = [<span class="number">0</span>] * <span class="number">256</span> <span class="comment">#通过符号表记录符号出现次数</span></span><br><span class="line">        <span class="keyword">while</span> l &lt; s_len:</span><br><span class="line">            <span class="keyword">if</span> r &lt; s_len <span class="keyword">and</span> usedChar[ord(s[r])] == <span class="number">0</span>:</span><br><span class="line">                usedChar[ord(s[r])] += <span class="number">1</span></span><br><span class="line">                r += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                usedChar[ord(s[l])] -= <span class="number">1</span></span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            maxLength = max(maxLength, r - l)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> maxLength</span><br></pre></td></tr></table></figure>
<p>这个解法虽然比前面的慢，但是空间复杂度是<code>O(256)</code>级别，而时间复杂度同样是<code>O(n)</code>级别。</p>
<p>该问题的其他语言版本添加到了我的<a href="https://github.com/luliyucoordinate/Leetcode" target="_blank" rel="noopener">GitHub Leetcode</a></p>
<p><strong>如有问题，希望大家指出！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-11-Hash表的理论基础与具体实现（详细教程）"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/11/2018-05-11-Hash表的理论基础与具体实现（详细教程）/">Hash表的理论基础与具体实现（详细教程）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/11/2018-05-11-Hash表的理论基础与具体实现（详细教程）/" class="article-date">
	  <time datetime="2018-05-10T16:00:00.000Z" itemprop="datePublished">五月 11, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>字典通常可以用三种数据类型表示：线性表，跳表，<code>Hash</code>表。</p>
<p><code>Hash</code>表又称为<strong>散列表</strong>，使用一个散列函数把字典的数对映射到一个散列表的具体位置。如果数对<em>p</em>的关键字是<em>k</em>，散列函数为<em>f</em>，那么在理想情况下，<em>p</em>在散列表中的位置为<em>f(k)</em>。暂时假定散列表的每一个位置最多能够存储一个记录。为了搜索关键字为<em>k</em>的数对，先要计算<em>f(k)</em>，然后查看在散列表的<em>f(k)</em>处是否已有一个数对。如果有，便找到该数对。如果没有，字典就不包含该数对。在前一种情况下，可以删除该数对，为此只需使散列表的<em>f(k)</em>位置为空。在后一种情况下，可以把该数对插入<em>f(k)</em>的位置。</p>
<p>#0x01 bucket 和 home bucket</p>
<p>当关键字的范围太大，不能用理想方法表示时，可以采用并不理想的散列表和散列函数。散列表位置的数量比关键字的个数少，散列函数把若干不同的关键字映射到散列表的同一位置。散列表的每一个位置称为一个<strong>bucket</strong>；对关键字为<em>k</em> 的数对，<em>f(k)</em> 是<strong>home bucket</strong>；<strong>bucket</strong>的数量等同于散列表的长度。因为散列函数可以把若干个关键字映射到同一个<strong>bucket</strong>，所以<strong>bucket</strong>要能够容纳多个数对。</p>
<p>#0x02 除法散列函数</p>
<p>在多种散列函数中，最常用的就是除法散列函数，它的形式如下：</p>
<ul>
<li>$f(k) =k\%D$</li>
</ul>
<p>其中<em>k</em>是关键字，<em>D</em>是散列表长度。</p>
<p>#0x03 冲突与溢出</p>
<p>我们先考虑一种情况，每个<strong>bucket</strong>只能存储一个数对。现在有这样一个散列表，它有11个<strong>bucket</strong>，序号从0到10。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0   1   2   3   4   5   6   7   8   9   10</span><br><span class="line">            80              40          65</span><br></pre></td></tr></table></figure>
<p><em>D</em>为11。我们很容易就可以计算出$80\%11=3$，$40\%11=7$，$65\%11=10$。其余的<strong>bucket</strong>为空。</p>
<p>现在我们要插入<code>58</code>，那么我们通过计算$58\%11=3$，但是这个<strong>bucket</strong>已经有一个数了。当两个不同的关键字所对应的<strong>home bucket</strong>相同，这个时候就发生了<strong>冲突</strong>。因为我们这个例子中的<strong>bucket</strong>只能存放一个数对，所以这个时候同时发生了<strong>溢出</strong>，但是如果我们的<strong>bucket</strong>可以存放多个数对的话，就不会发生<strong>溢出</strong>。</p>
<p>我们可以通过<strong>线性探查</strong>（找到下一个可用的<strong>bucket</strong>）的方法解决这个问题。我们将<code>58</code>加入到<strong>4号bucket</strong>。通过这种方法，我们将散列表看成是一个环形表。例如，对于$98\%11=10$，我们将<code>98</code>加入到<strong>0号bucket</strong>。</p>
<p>#0x04 一个好的散列函数</p>
<p>我们很容易就能想明白的一点是：<strong>冲突不可怕，可怕的是溢出</strong>。除非每个<strong>bucket</strong>可以存放<strong>无限个</strong>数对，否则插入时发生溢出就是一个很难解决的问题。当映射到散列表中任何一个<strong>bucket</strong>里的关键字数量大致相等时，冲突和溢出发生的平均次数最少。基于这一点，我们就有了<strong>均匀散列函数</strong>。</p>
<ul>
<li>假定散列有<em>b</em>个<strong>bucket</strong>，且$b &gt; 1$，<strong>bucket</strong>的序号从 0 到 $b-1$。如果对所有的<em>k</em>，散列函数$f(k) = 0$，那么<em>f(k)</em>就不是一个<strong>均匀散列函数</strong>，因为它把所有的关键字都映射到一个<em>0</em>号桶里。这样的散列函数使冲突和溢出的数量最大。假设$b=11$，关键字范围为<code>[0, 999]</code>，那么它应该大约把每99个关键字映射到同一个桶<strong>bucket</strong>中。</li>
<li>理想的<em>D</em>应该是一个<strong>素数</strong>。当不能找到一个接近散列表长度的素数时，你应该选择不能被2和19之间的数整除的<em>D</em>。</li>
</ul>
<p>#0x05 除法和非整型关键字</p>
<p>为了使用<strong>除法散列函数</strong>，在计算<em>f(k)</em>之前，需要把关键字转换为非负整数。因为所有散列函数都把若干个关键字分不到相同的<strong>home bucket</strong>，所以没有必要把关键字转化为统一的非负整数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">stringToInt</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> length = (<span class="keyword">int</span>)s.length();</span><br><span class="line">    <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (length % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        answer = s.at(length - <span class="number">1</span>);</span><br><span class="line">        --length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        answer += s.at(i);</span><br><span class="line">        answer += ((<span class="keyword">int</span>)s.at(i + <span class="number">1</span>)) &lt;&lt; <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (answer &lt; <span class="number">0</span>) ? -answer : answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们通过上述代码将字符逐个转换为一个唯一整数，并累积求和。这个函数中有一个有意思的操作：<strong>左移24位</strong>。我们为什么不直接将所有字符加起来，而要左移后相加呢？我们希望充分的利用数据空间，原先如果没有左移操作，那么对于长度为8的字符串，直接相加转化为整数的话，只是用了11位字节，而<code>int</code>有32位（win32下）。</p>
<p>参考STL，我们给出令一个版本的<code>hash</code>函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">hash</span>&lt;string&gt;</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">size_t</span> <span class="keyword">operator</span>()(<span class="keyword">const</span> <span class="built_in">string</span> theKey) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">long</span> hashValue = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> length = (<span class="keyword">int</span>) theKey.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            hashValue = <span class="number">5</span> * hashValue + theKey.at(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">size_t</span>(hashValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#0x06 hashTable类的设计</p>
<p>我们使用前面设计的<code>hash</code>函数设计这样的一个<code>hashTable</code>类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">K</span>, <span class="title">class</span> <span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">hashTable</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    hashTable(<span class="keyword">int</span> theDivisor);</span><br><span class="line">    ~hashTable();</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">const</span> K&amp; theKey)</span> <span class="keyword">const</span></span>;</span><br><span class="line">    pair&lt;<span class="keyword">const</span> K, E&gt;* find(<span class="keyword">const</span> K&amp; theKey) <span class="keyword">const</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">const</span> pair&lt;<span class="keyword">const</span> K, E&gt;&amp; thePair)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    pair&lt;<span class="keyword">const</span> K, E&gt;** table;<span class="comment">//散列表</span></span><br><span class="line">    hash&lt;K&gt; hash;			<span class="comment">//hash函数</span></span><br><span class="line">    <span class="keyword">int</span> dSize;				<span class="comment">//散列表中的数对个数</span></span><br><span class="line">    <span class="keyword">int</span> divisor;			<span class="comment">//D</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时这里我们给出构造函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">K</span>, <span class="title">class</span> <span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">hashTable</span>&lt;K, E&gt;:</span>:hashTable(<span class="keyword">int</span> theDivisor)</span><br><span class="line">&#123;</span><br><span class="line">    divisor = theDivisor;</span><br><span class="line">    dSize = <span class="number">0</span>;</span><br><span class="line">    table = <span class="keyword">new</span> pair&lt;<span class="keyword">const</span> K, E&gt;*[divisor];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; divisor; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        table[i] = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#0x07 查找记录</p>
<p>如果你明白了之前的线性探查法进行插入过程，那么就可以轻松的设计出散列表的查找方法。假设要查找的关键字为<em>k</em>的数对，首先搜索<em>f(k)</em>，然后把散列表当作环形表继续搜索下一个<strong>bucket</strong>，直到下面的情况发生：</p>
<ul>
<li>关键字<em>k</em>的<strong>bucket</strong>找到</li>
<li>到达一个空的<strong>bucket</strong></li>
<li>回到<em>f(k)</em></li>
</ul>
<p>后两者说明关键字<em>k</em>的数对不存在。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">K</span>, <span class="title">class</span> <span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">int</span> <span class="title">hashTable</span>&lt;K, E&gt;:</span>:search(<span class="keyword">const</span> K&amp; theKey) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> i = (<span class="keyword">int</span>) hash(theKey) % divisor;</span><br><span class="line">    <span class="keyword">int</span> j = i; </span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (table[j] == <span class="literal">nullptr</span> || table[j]-&gt;first == theKey) <span class="keyword">return</span> j;</span><br><span class="line">        j = (j + <span class="number">1</span>) % divisor;</span><br><span class="line">    &#125;<span class="keyword">while</span>(j != i);</span><br><span class="line">    <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">K</span>, <span class="title">class</span> <span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">pair</span>&lt;const K, E&gt;* <span class="title">hashTable</span>&lt;K, E&gt;:</span>:find(<span class="keyword">const</span> K&amp; theKey) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> b = search(theKey);</span><br><span class="line">    <span class="keyword">if</span> (table[b] == <span class="literal">nullptr</span> || table[b]-&gt;first != theKey) <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">return</span> table[b];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们这里给出的<code>search</code>函数中，函数返回值有三种情况：</p>
<ul>
<li><code>table[b]</code>是一个指针，指向关键字<code>theKey</code>的数对</li>
<li>散列表没有关键字<code>theKey</code>的数对，并且<code>table[b]=nullptr</code></li>
<li>散列表没有关键字<code>theKey</code>的数对，但是<code>table[b]!=nullptr</code>，这表示表满。</li>
</ul>
<p>#0x08 删除记录</p>
<p>删除一个记录要保证查找过程可以正常进行。例如，我们添加记录$35\%11=2$，根据线性探查法，插入到5号<strong>bucket</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0   1   2   3   4   5   6   7   8   9   10</span><br><span class="line">            80  58  35      40          65</span><br></pre></td></tr></table></figure>
<p>删除58，我们不能仅仅将4号<strong>bucket</strong>置空，这样我们就无法找到关键字35的数对。从删除位置的下一个<strong>bucket</strong>开始，逐个检查每个<strong>bucket</strong>，以确定要移动的元素，直至到达一个空的<strong>bucket</strong>或回到删除位置为止。</p>
<p>实现删除的另一个策略是为每个<strong>bucket</strong>增加一个域<code>neverUsed</code>。在散列表初始化时，这个域被设置为<code>true</code>。当一个数对存入一个<strong>bucket</strong>中时，<code>neverUsed</code>域被设置为<code>false</code>。现在搜索结束条件：<strong>到达一个空bucket</strong>变为<strong>bucket的neverUsed域为true</strong>。不过在删除时，只是把表的相应位置置为空。一个新元素被插入在其对应的<strong>home bucket</strong>之后所找到的第一个空的<strong>bucket</strong>中。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">K</span>, <span class="title">class</span> <span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">hashTable</span>&lt;K, E&gt;:</span>:erase(<span class="keyword">const</span> K&amp; theKey)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> b = search(theKey);</span><br><span class="line">    <span class="keyword">if</span> (table[b] == <span class="literal">nullptr</span> || table[b]-&gt;first != theKey) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> i = theKey % divisor;</span><br><span class="line">    <span class="keyword">int</span> j = i;</span><br><span class="line">    <span class="keyword">delete</span> table[j];</span><br><span class="line">    table[j] = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;      </span><br><span class="line">        <span class="keyword">int</span> pre = j;</span><br><span class="line">        j = (j + <span class="number">1</span>) % divisor; </span><br><span class="line">        <span class="keyword">if</span> (table[j] != <span class="literal">nullptr</span> &amp;&amp; (table[j]-&gt;first) % divisor == j)</span><br><span class="line">        &#123;</span><br><span class="line">            table[pre] = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        table[pre] = table[j];     </span><br><span class="line">    &#125; <span class="keyword">while</span> (i != j || table[j] != <span class="literal">nullptr</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="0x09-插入记录"><a href="#0x09-插入记录" class="headerlink" title="0x09 插入记录"></a>0x09 插入记录</h1><p>我们首先调用<code>search</code>方法，根据<code>search</code>方法，如果返回的<code>b</code>号<strong>bucket</strong>为空，则白哦是没有关键字为<code>thePair.first</code>的数对，该数对可以插入<strong>bucket</strong>中。若返回的值非空，则表示在表中已经存在<code>thePair.first</code>的数对了或者表满。如果是前面一种情况，把该<strong>bucket</strong>的数对值改为<code>thePair.second</code>。如果是后一种情况，那么抛出异常。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">hashTableFull</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	hashTableFull(<span class="built_in">string</span> theMessage =</span><br><span class="line">		<span class="string">"The hash table is full"</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		message = theMessage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">outputMessage</span><span class="params">()</span> </span>&#123; <span class="built_in">cout</span> &lt;&lt; message &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">string</span> message;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">K</span>, <span class="title">class</span> <span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">hashTable</span>&lt;K, E&gt;:</span>:insert(<span class="keyword">const</span> pair&lt;<span class="keyword">const</span> K, E&gt;&amp; thePair)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> b = search(thePair.first);</span><br><span class="line">    <span class="keyword">if</span> (table[b] == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        table[b] = <span class="keyword">new</span> pair&lt;<span class="keyword">const</span> K, E&gt;(thePair);</span><br><span class="line">        ++dSize;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (table[b]-&gt;first == thePair.first)</span><br><span class="line">        &#123;</span><br><span class="line">            table[b]-&gt;second == thePair.second;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> hashTableFull();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>如有任何问题，希望大家指正！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/算法/">算法</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-2018-05-10-python-递归解析-JSON"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/11/2018-05-10-python-递归解析-JSON/">python递归解析JSON（目前最好的方案）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/05/11/2018-05-10-python-递归解析-JSON/" class="article-date">
	  <time datetime="2018-05-10T16:00:00.000Z" itemprop="datePublished">五月 11, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/python/">python</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>我们要完成的任务是输出<code>JSON</code>字典，并且对其中的每个元素，要输出它的所有父节点。那么很容易想到的做法就是递归解析。</p>
<p>我参考了别人的一些文章和回答，总结了如下的解决方案：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dict_generator</span><span class="params">(indict, pre=None)</span>:</span></span><br><span class="line">    pre = pre[:] <span class="keyword">if</span> pre <span class="keyword">else</span> []</span><br><span class="line">    <span class="keyword">if</span> isinstance(indict, dict):</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> indict.items():</span><br><span class="line">            <span class="keyword">if</span> isinstance(value, dict):</span><br><span class="line">                <span class="keyword">if</span> len(value) == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">yield</span> pre+[key, <span class="string">'&#123;&#125;'</span>]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">for</span> d <span class="keyword">in</span> dict_generator(value, pre + [key]):</span><br><span class="line">                        <span class="keyword">yield</span> d</span><br><span class="line">            <span class="keyword">elif</span> isinstance(value, list):</span><br><span class="line">                <span class="keyword">if</span> len(value) == <span class="number">0</span>:                   </span><br><span class="line">                    <span class="keyword">yield</span> pre+[key, <span class="string">'[]'</span>]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">for</span> v <span class="keyword">in</span> value:</span><br><span class="line">                        <span class="keyword">for</span> d <span class="keyword">in</span> dict_generator(v, pre + [key]):</span><br><span class="line">                            <span class="keyword">yield</span> d</span><br><span class="line">            <span class="keyword">elif</span> isinstance(value, tuple):</span><br><span class="line">                <span class="keyword">if</span> len(value) == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">yield</span> pre+[key, <span class="string">'()'</span>]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">for</span> v <span class="keyword">in</span> value:</span><br><span class="line">                        <span class="keyword">for</span> d <span class="keyword">in</span> dict_generator(v, pre + [key]):</span><br><span class="line">                            <span class="keyword">yield</span> d</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">yield</span> pre + [key, value]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">yield</span> indict</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    sJOSN =  <span class="string">''</span></span><br><span class="line">    sValue = json.loads(sJOSN)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> dict_generator(sValue):</span><br><span class="line">        print(<span class="string">'.'</span>.join(i[<span class="number">0</span>:<span class="number">-1</span>]), <span class="string">':'</span>, i[<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>
<p>我对于以下几个例子做出测试</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"base_config"</span>:&#123;</span><br><span class="line">        <span class="attr">"enforce"</span>:&#123;</span><br><span class="line">            <span class="attr">"value"</span>:<span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"inherit"</span>:<span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"global"</span>:<span class="string">"0"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"modify"</span>:&#123;</span><br><span class="line">            <span class="attr">"value"</span>:<span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"inherit"</span>:<span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"global"</span>:<span class="string">"0"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"safe_control_list"</span>:&#123;</span><br><span class="line">        <span class="attr">"list"</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"gid"</span>:<span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"gname"</span>:<span class="string">"全网计算机"</span>,</span><br><span class="line">                <span class="attr">"isactive"</span>:<span class="string">"1"</span>,</span><br><span class="line">                <span class="attr">"rule_id"</span>:<span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"rule_name"</span>:<span class="string">"请选择规则"</span>,</span><br><span class="line">                <span class="attr">"time_range"</span>:<span class="string">"所有时间"</span>,</span><br><span class="line">                <span class="attr">"time_range_id"</span>:<span class="string">"1"</span>,</span><br><span class="line">                <span class="attr">"policy_tpl"</span>:<span class="string">"33"</span>,</span><br><span class="line">                <span class="attr">"policy_tpl_id"</span>:<span class="string">"17"</span>,</span><br><span class="line">                <span class="attr">"isonline"</span>:<span class="string">"3"</span>,</span><br><span class="line">                <span class="attr">"priority"</span>:<span class="string">"1"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试结果如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">base_config.enforce.value : 0</span><br><span class="line">base_config.enforce.inherit : 0</span><br><span class="line">base_config.enforce.global : 0</span><br><span class="line">base_config.modify.value : 0</span><br><span class="line">base_config.modify.inherit : 0</span><br><span class="line">base_config.modify.global : 0</span><br><span class="line">safe_control_list.list.gid : 0</span><br><span class="line">safe_control_list.list.gname : 全网计算机</span><br><span class="line">safe_control_list.list.isactive : 1</span><br><span class="line">safe_control_list.list.rule_id : 0</span><br><span class="line">safe_control_list.list.rule_name : 请选择规则</span><br><span class="line">safe_control_list.list.time_range : 所有时间</span><br><span class="line">safe_control_list.list.time_range_id : 1</span><br><span class="line">safe_control_list.list.policy_tpl : 33</span><br><span class="line">safe_control_list.list.policy_tpl_id : 17</span><br><span class="line">safe_control_list.list.isonline : 3</span><br><span class="line">safe_control_list.list.priority : 1</span><br></pre></td></tr></table></figure>
<p>使用另外一个测试用例</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"detail"</span>:&#123;</span><br><span class="line">        <span class="attr">"baseline"</span>:&#123;</span><br><span class="line">            <span class="attr">"cancel_scheduled_task"</span>:<span class="string">"1"</span>,</span><br><span class="line">            <span class="attr">"comeonstage"</span>:<span class="string">"topwin"</span>,</span><br><span class="line">            <span class="attr">"conf_ver"</span>:<span class="number">2635792175</span>,</span><br><span class="line">            <span class="attr">"conf_ver_s"</span>:<span class="string">"f7f8ac46##"</span>,</span><br><span class="line">            <span class="attr">"mission_id"</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">"rules"</span>:&#123;</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"scheduled_task"</span>:<span class="string">"1"</span>,</span><br><span class="line">            <span class="attr">"scheduled_task_rule"</span>:&#123;</span><br><span class="line">                <span class="attr">"autoexec_on_coundown"</span>:<span class="string">"1"</span>,</span><br><span class="line">                <span class="attr">"exec_countdown"</span>:<span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"exec_interval"</span>:<span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"exec_mode"</span>:<span class="string">"4"</span>,</span><br><span class="line">                <span class="attr">"exec_time"</span>:<span class="string">"*|00|*|*|*"</span>,</span><br><span class="line">                <span class="attr">"extra"</span>:&#123;</span><br><span class="line">                    <span class="attr">"countdown_type"</span>:<span class="string">"3600"</span>,</span><br><span class="line">                    <span class="attr">"cycle_type"</span>:<span class="string">"1"</span>,</span><br><span class="line">                    <span class="attr">"every_type"</span>:<span class="string">"1"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"gid"</span>:<span class="number">0</span>,</span><br><span class="line">                <span class="attr">"is_notice"</span>:<span class="string">"1"</span>,</span><br><span class="line">                <span class="attr">"is_reportback"</span>:<span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"module_id"</span>:<span class="number">3</span>,</span><br><span class="line">                <span class="attr">"name"</span>:<span class="string">""</span>,</span><br><span class="line">                <span class="attr">"notice_msg"</span>:<span class="string">""</span>,</span><br><span class="line">                <span class="attr">"status"</span>:<span class="number">1</span>,</span><br><span class="line">                <span class="attr">"tpl_id"</span>:<span class="number">420</span>,</span><br><span class="line">                <span class="attr">"type"</span>:<span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"id"</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">"type"</span>:<span class="number">2100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试结果如下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">detail.baseline.cancel_scheduled_task : 1</span><br><span class="line">detail.baseline.comeonstage : topwin</span><br><span class="line">detail.baseline.conf_ver : 2635792175</span><br><span class="line">detail.baseline.conf_ver_s : f7f8ac46##</span><br><span class="line">detail.baseline.mission_id : 0</span><br><span class="line">detail.baseline.rules : &#123;&#125;</span><br><span class="line">detail.baseline.scheduled_task : 1</span><br><span class="line">detail.baseline.scheduled_task_rule.autoexec_on_coundown : 1</span><br><span class="line">detail.baseline.scheduled_task_rule.exec_countdown : 0</span><br><span class="line">detail.baseline.scheduled_task_rule.exec_interval : 0</span><br><span class="line">detail.baseline.scheduled_task_rule.exec_mode : 4</span><br><span class="line">detail.baseline.scheduled_task_rule.exec_time : *|00|*|*|*</span><br><span class="line">detail.baseline.scheduled_task_rule.extra.countdown_type : 3600</span><br><span class="line">detail.baseline.scheduled_task_rule.extra.cycle_type : 1</span><br><span class="line">detail.baseline.scheduled_task_rule.extra.every_type : 1</span><br><span class="line">detail.baseline.scheduled_task_rule.gid : 0</span><br><span class="line">detail.baseline.scheduled_task_rule.is_notice : 1</span><br><span class="line">detail.baseline.scheduled_task_rule.is_reportback : 0</span><br><span class="line">detail.baseline.scheduled_task_rule.module_id : 3</span><br><span class="line">detail.baseline.scheduled_task_rule.name : </span><br><span class="line">detail.baseline.scheduled_task_rule.notice_msg : </span><br><span class="line">detail.baseline.scheduled_task_rule.status : 1</span><br><span class="line">detail.baseline.scheduled_task_rule.tpl_id : 420</span><br><span class="line">detail.baseline.scheduled_task_rule.type : 1</span><br><span class="line">id : 1</span><br><span class="line">type : 2100</span><br></pre></td></tr></table></figure>
<p><strong>如果大家在使用过程中有任何问题，希望告知，我加以完善！！！</strong></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/python/">python</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JSON/">JSON</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/10/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/12/">下一页</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 72%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 36px; width: 100%;" placeholder=" 搜索…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="搜索">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">联系我们</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
   			<li><a href="https://github.com/luliyucoordinate" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="QQ"><i class="fa fa-qq" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Weixin"><i class="fa fa-weixin" aria-hidden="true"></i></a></li> 

   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>最新文章</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/09/13/2018-09-13-Leetcode-130-被围绕的区域（最详细的解法！！！）/">Leetcode 130：被围绕的区域（最详细的解法！！！）</a></h6>
              <span>九月 13, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/09/13/2018-09-13-Leetcode-200-岛屿的个数（最详细的解法！！！）/">Leetcode 200：岛屿的个数（最详细的解法！！！）</a></h6>
              <span>九月 13, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/09/12/2018-09-12-Leetcode-401-二进制手表（最详细的解法！！！）/">Leetcode 401：二进制手表（最详细的解法！！！）</a></h6>
              <span>九月 12, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/09/12/2018-09-12-Leetcode-79-单词搜索（最详细的解法！！！）/">Leetcode 79：单词搜索（最详细的解法！！！）</a></h6>
              <span>九月 12, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/09/11/2018-09-11-Leetcode-90-子集 II（最详细的解法！！！）/">Leetcode 90：子集 II（最详细的解法！！！）</a></h6>
              <span>九月 11, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/09/10/2018-09-10-Leetcode-40-组合总和 II（最详细的解法！！！）/">Leetcode 40：组合总和 II（最详细的解法！！！）</a></h6>
              <span>九月 10, 2018</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/QT/">QT</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/asp/">asp</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c++</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cpp/">cpp</a><span class="category-list-count">78</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/index/">index</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">35</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/toy/">toy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息安全/">信息安全</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/图像处理/">图像处理</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">112</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机系统原理/">计算机系统原理</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/">计算机网络</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/1080ti/" style="font-size: 10.67px;">1080ti</a> <a href="/tags/ADL/" style="font-size: 10px;">ADL</a> <a href="/tags/Aggregate/" style="font-size: 10px;">Aggregate</a> <a href="/tags/Dell/" style="font-size: 11.33px;">Dell</a> <a href="/tags/Eassy/" style="font-size: 11.33px;">Eassy</a> <a href="/tags/Eval/" style="font-size: 10px;">Eval</a> <a href="/tags/Execute/" style="font-size: 10px;">Execute</a> <a href="/tags/ExecuteGlobal/" style="font-size: 10px;">ExecuteGlobal</a> <a href="/tags/Fibonacci/" style="font-size: 10px;">Fibonacci</a> <a href="/tags/Google/" style="font-size: 10px;">Google</a> <a href="/tags/IOU/" style="font-size: 10px;">IOU</a> <a href="/tags/JSON/" style="font-size: 10.67px;">JSON</a> <a href="/tags/K-means/" style="font-size: 10px;">K-means</a> <a href="/tags/K-means/" style="font-size: 10px;">K-means++</a> <a href="/tags/Kolakoski/" style="font-size: 10px;">Kolakoski</a> <a href="/tags/Li-Fei-Fei/" style="font-size: 10px;">Li Fei Fei</a> <a href="/tags/MNIST/" style="font-size: 10.67px;">MNIST</a> <a href="/tags/MySQL/" style="font-size: 10.67px;">MySQL</a> <a href="/tags/PIL/" style="font-size: 10px;">PIL</a> <a href="/tags/POD/" style="font-size: 10px;">POD</a> <a href="/tags/Pickle/" style="font-size: 10px;">Pickle</a> <a href="/tags/QT/" style="font-size: 11.33px;">QT</a> <a href="/tags/SNIP/" style="font-size: 10px;">SNIP</a> <a href="/tags/Ubuntu/" style="font-size: 11.33px;">Ubuntu</a> <a href="/tags/YOLO/" style="font-size: 14.67px;">YOLO</a> <a href="/tags/acm/" style="font-size: 10px;">acm</a> <a href="/tags/advance/" style="font-size: 10px;">advance</a> <a href="/tags/algorithm/" style="font-size: 10px;">algorithm</a> <a href="/tags/array/" style="font-size: 10px;">array</a> <a href="/tags/asp/" style="font-size: 10px;">asp</a> <a href="/tags/auto/" style="font-size: 10.67px;">auto</a> <a href="/tags/auto/" style="font-size: 10px;">auto&</a> <a href="/tags/auto/" style="font-size: 10px;">auto&&</a> <a href="/tags/big-file/" style="font-size: 10px;">big file</a> <a href="/tags/binding/" style="font-size: 10px;">binding</a> <a href="/tags/c/" style="font-size: 19.33px;">c</a> <a href="/tags/c/" style="font-size: 10px;">c#</a> <a href="/tags/c/" style="font-size: 18.67px;">c++</a> <a href="/tags/cin/" style="font-size: 10px;">cin</a> <a href="/tags/constexpr/" style="font-size: 10px;">constexpr</a> <a href="/tags/cpp/" style="font-size: 18px;">cpp</a> <a href="/tags/cpp标准库/" style="font-size: 16.67px;">cpp标准库</a> <a href="/tags/cpp第二版/" style="font-size: 11.33px;">cpp第二版</a> <a href="/tags/cuda/" style="font-size: 11.33px;">cuda</a> <a href="/tags/cudnn/" style="font-size: 10.67px;">cudnn</a> <a href="/tags/darknet/" style="font-size: 14.67px;">darknet</a> <a href="/tags/dd/" style="font-size: 10px;">dd</a> <a href="/tags/default/" style="font-size: 10px;">default</a> <a href="/tags/descriptor/" style="font-size: 10px;">descriptor</a> <a href="/tags/dict/" style="font-size: 10px;">dict</a> <a href="/tags/downcasting/" style="font-size: 10px;">downcasting</a> <a href="/tags/error/" style="font-size: 11.33px;">error</a> <a href="/tags/estimator/" style="font-size: 11.33px;">estimator</a> <a href="/tags/fire/" style="font-size: 10px;">fire</a> <a href="/tags/forward/" style="font-size: 10px;">forward</a> <a href="/tags/game/" style="font-size: 10px;">game</a> <a href="/tags/glvalue/" style="font-size: 10px;">glvalue</a> <a href="/tags/hook/" style="font-size: 10px;">hook</a> <a href="/tags/identity/" style="font-size: 10px;">identity</a> <a href="/tags/lambda/" style="font-size: 10px;">lambda</a> <a href="/tags/linux/" style="font-size: 16px;">linux</a> <a href="/tags/lvalue/" style="font-size: 10px;">lvalue</a> <a href="/tags/mAP/" style="font-size: 10px;">mAP</a> <a href="/tags/map/" style="font-size: 10px;">map</a> <a href="/tags/merge/" style="font-size: 10px;">merge</a> <a href="/tags/mismatch/" style="font-size: 10px;">mismatch</a> <a href="/tags/move/" style="font-size: 10px;">move</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/namehiding/" style="font-size: 10.67px;">namehiding</a> <a href="/tags/network/" style="font-size: 12px;">network</a> <a href="/tags/next/" style="font-size: 10px;">next</a> <a href="/tags/notes/" style="font-size: 17.33px;">notes</a> <a href="/tags/numpy/" style="font-size: 12.67px;">numpy</a> <a href="/tags/office/" style="font-size: 10.67px;">office</a> <a href="/tags/oj/" style="font-size: 10px;">oj</a> <a href="/tags/opencv/" style="font-size: 14px;">opencv</a> <a href="/tags/oracle/" style="font-size: 10.67px;">oracle</a> <a href="/tags/overload/" style="font-size: 10.67px;">overload</a> <a href="/tags/override/" style="font-size: 10.67px;">override</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/piecewise-construct/" style="font-size: 10px;">piecewise_construct</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/pipe/" style="font-size: 10.67px;">pipe</a> <a href="/tags/process/" style="font-size: 10px;">process</a> <a href="/tags/property/" style="font-size: 10px;">property</a> <a href="/tags/prvalue/" style="font-size: 10px;">prvalue</a> <a href="/tags/pytesseract/" style="font-size: 10px;">pytesseract</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/pytorch/" style="font-size: 11.33px;">pytorch</a> <a href="/tags/qt/" style="font-size: 13.33px;">qt</a> <a href="/tags/quit/" style="font-size: 10px;">quit</a> <a href="/tags/re/" style="font-size: 11.33px;">re</a> <a href="/tags/requests/" style="font-size: 10.67px;">requests</a> <a href="/tags/rvalue/" style="font-size: 10px;">rvalue</a> <a href="/tags/shell/" style="font-size: 10.67px;">shell</a> <a href="/tags/signal/" style="font-size: 10.67px;">signal</a> <a href="/tags/sql/" style="font-size: 10.67px;">sql</a> <a href="/tags/sql注入/" style="font-size: 10px;">sql注入</a> <a href="/tags/stl/" style="font-size: 16px;">stl</a> <a href="/tags/super/" style="font-size: 10.67px;">super</a> <a href="/tags/tensorflow/" style="font-size: 14.67px;">tensorflow</a> <a href="/tags/thread/" style="font-size: 10.67px;">thread</a> <a href="/tags/threading/" style="font-size: 10px;">threading</a> <a href="/tags/trie树/" style="font-size: 10px;">trie树</a> <a href="/tags/uninstall/" style="font-size: 10.67px;">uninstall</a> <a href="/tags/unordered-multimap/" style="font-size: 10px;">unordered_multimap</a> <a href="/tags/upcasting/" style="font-size: 10px;">upcasting</a> <a href="/tags/vbs/" style="font-size: 10px;">vbs</a> <a href="/tags/vector/" style="font-size: 10px;">vector</a> <a href="/tags/vfptr/" style="font-size: 10px;">vfptr</a> <a href="/tags/vmware/" style="font-size: 10px;">vmware</a> <a href="/tags/wait/" style="font-size: 10px;">wait</a> <a href="/tags/windows/" style="font-size: 10.67px;">windows</a> <a href="/tags/xlvalue/" style="font-size: 10px;">xlvalue</a> <a href="/tags/yolo/" style="font-size: 10px;">yolo</a> <a href="/tags/人工智能/" style="font-size: 10px;">人工智能</a> <a href="/tags/仿函数/" style="font-size: 10px;">仿函数</a> <a href="/tags/内存模型/" style="font-size: 10px;">内存模型</a> <a href="/tags/决策树算法/" style="font-size: 10px;">决策树算法</a> <a href="/tags/分配器/" style="font-size: 10px;">分配器</a> <a href="/tags/原理/" style="font-size: 16.67px;">原理</a> <a href="/tags/反斜杠/" style="font-size: 10px;">反斜杠</a> <a href="/tags/回文字符串/" style="font-size: 10px;">回文字符串</a> <a href="/tags/多态/" style="font-size: 10px;">多态</a> <a href="/tags/字典树/" style="font-size: 10px;">字典树</a> <a href="/tags/字符串令牌/" style="font-size: 10px;">字符串令牌</a> <a href="/tags/引用折叠/" style="font-size: 10px;">引用折叠</a> <a href="/tags/排列组合/" style="font-size: 10px;">排列组合</a> <a href="/tags/时间复杂度/" style="font-size: 10px;">时间复杂度</a> <a href="/tags/木马/" style="font-size: 10px;">木马</a> <a href="/tags/机器学习/" style="font-size: 10.67px;">机器学习</a> <a href="/tags/模式识别/" style="font-size: 10px;">模式识别</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/深度学习/" style="font-size: 10px;">深度学习</a> <a href="/tags/漏洞/" style="font-size: 10px;">漏洞</a> <a href="/tags/病毒/" style="font-size: 10px;">病毒</a> <a href="/tags/空字符串/" style="font-size: 10px;">空字符串</a> <a href="/tags/笔试/" style="font-size: 11.33px;">笔试</a> <a href="/tags/算法/" style="font-size: 14px;">算法</a> <a href="/tags/缓冲区溢出/" style="font-size: 10px;">缓冲区溢出</a> <a href="/tags/计算机网络/" style="font-size: 10.67px;">计算机网络</a> <a href="/tags/贪吃蛇/" style="font-size: 10px;">贪吃蛇</a> <a href="/tags/贪心算法/" style="font-size: 10px;">贪心算法</a> <a href="/tags/转载/" style="font-size: 15.33px;">转载</a> <a href="/tags/迭代器/" style="font-size: 12px;">迭代器</a> <a href="/tags/适配器/" style="font-size: 10px;">适配器</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">46</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
      <ul class="entry">
        
          <li class='link'><a href='http://www.wangningcheng.com'>梦影无痕</a></li>
        
          <li class='link'><a href='https://blanboom.org'>Blanboom</a></li>
        
      </ul>
  </div>



  
</aside>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2018 coordinate All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
